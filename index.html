<!doctype html>
<html lang="it">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>Verifica</title>

  <style>
    :root{
      --bg:#f6f7fb;
      --card:#ffffff;
      --text:#1f2937;
      --muted:#6b7280;
      --border:#e5e7eb;
      --blue:#2b6cff;
      --pink:#ffe4ee;
      --shadow:0 18px 55px rgba(16,24,40,.14);
      --radius:18px;
    }
    *{box-sizing:border-box;-webkit-tap-highlight-color:transparent}
    body{
      margin:0;
      font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial;
      background:var(--bg);
      min-height:100svh;
      display:grid;
      place-items:center;
      padding:18px;
      transition:background .4s ease;
    }
    body.pink{background:var(--pink)}

    .wrap{width:min(420px,100%)}
    .card{
      background:var(--card);
      border:1px solid var(--border);
      border-radius:var(--radius);
      box-shadow:var(--shadow);
      overflow:hidden;
    }

    /* Fake checkbox */
    .robot-panel{
      display:grid;
      grid-template-columns:44px 1fr;
      gap:14px;
      align-items:center;
      padding:18px;
    }
    .fake-check{
      width:34px;height:34px;
      border-radius:6px;
      border:2px solid #c7cdd8;
      display:grid;
      place-items:center;
      background:#fff;
    }
    .fake-check .tick{
      width:18px;height:10px;
      border-left:4px solid transparent;
      border-bottom:4px solid transparent;
      transform:rotate(-45deg);
      opacity:0;
      transition:.2s;
    }
    .fake-check.checked{
      border-color:#b7c4ff;
      box-shadow:0 0 0 4px rgba(43,108,255,.12);
    }
    .fake-check.checked .tick{
      border-left-color:var(--blue);
      border-bottom-color:var(--blue);
      opacity:1;
    }

    .robot-title{font-weight:600}
    .robot-sub{font-size:12px;color:var(--muted)}

    .footer{
      padding:10px 14px;
      border-top:1px solid var(--border);
      background:#fbfcff;
      font-size:12px;
      color:var(--muted);
      display:flex;
      justify-content:space-between;
    }

    /* Modal */
    .modal{
      position:fixed;
      inset:0;
      background:rgba(17,24,39,.55);
      display:none;
      align-items:center;
      justify-content:center;
      padding:18px;
      z-index:999;
    }
    .modal.open{display:flex}

    .challenge{
      background:#fff;
      border-radius:22px;
      width:min(520px,100%);
      overflow:hidden;
      position:relative;
      box-shadow:0 25px 80px rgba(0,0,0,.35);
    }
    .challenge-head{
      padding:16px;
      background:linear-gradient(135deg,#2b6cff,#7c3aed);
      color:#fff;
    }
    .challenge-head .label{font-size:12px;opacity:.9}
    .challenge-head .prompt{font-size:18px;font-weight:800;margin-top:6px}

    .grid{
      display:grid;
      grid-template-columns:repeat(3,1fr);
      gap:6px;
      padding:12px;
      background:#f3f4f6;
    }
    .tile{
      aspect-ratio:1/1;
      border-radius:14px;
      overflow:hidden;
      border:2px solid transparent;
      position:relative;
    }
    .tile img{
      width:100%;
      height:100%;
      object-fit:cover;
      display:block;
    }
    .tile.selected{
      border-color:#22c55e;
      box-shadow:0 0 0 4px rgba(34,197,94,.18);
    }
    .badge{
      position:absolute;
      top:8px;right:8px;
      width:26px;height:26px;
      border-radius:999px;
      background:#22c55e;
      color:#fff;
      font-weight:900;
      display:grid;
      place-items:center;
      opacity:0;
      transition:.15s;
    }
    .tile.selected .badge{opacity:1}

    .foot{
      padding:12px;
      display:flex;
      justify-content:space-between;
      align-items:center;
      border-top:1px solid var(--border);
    }
    .btn{
      border:0;
      border-radius:12px;
      padding:10px 14px;
      font-weight:800;
      font-size:14px;
    }
    .btn.primary{
      background:var(--blue);
      color:#fff;
      opacity:.5;
    }
    .btn.primary.ready{opacity:1}

    /* Spinner */
    .spinner-overlay{
      position:absolute;
      inset:0;
      background:rgba(255,255,255,.85);
      display:none;
      align-items:center;
      justify-content:center;
      flex-direction:column;
      gap:12px;
      backdrop-filter:blur(6px);
    }
    .spinner-overlay.show{display:flex}
    .spinner{
      width:42px;height:42px;
      border-radius:50%;
      border:5px solid rgba(43,108,255,.2);
      border-top-color:var(--blue);
      animation:spin .9s linear infinite;
    }
    @keyframes spin{to{transform:rotate(360deg)}}

    /* Final image */
    .final{
      display:none;
      place-items:center;
      padding:24px;
    }
    .final.show{
      display:grid;
    }
    .final img{
      max-width:90%;
      max-height:80svh;
      border-radius:24px;
      box-shadow:0 25px 60px rgba(0,0,0,.25);
    }
  </style>
</head>

<body>
  <main class="wrap">
    <section class="card" id="startCard">
      <div class="robot-panel">
        <div class="fake-check" id="check">
          <span class="tick"></span>
        </div>
        <div>
          <div class="robot-title">Iâ€™m not a robot</div>
          <div class="robot-sub">Verifica super-seria</div>
        </div>
      </div>
      <div class="footer">
        <span>Mobile â€¢ iPhone</span>
        <span>ðŸ”’ locale</span>
      </div>
    </section>

    <section class="final" id="final">
      <img src="phonto.jpeg" alt="Noi">
    </section>
  </main>

  <div class="modal" id="modal">
    <div class="challenge">
      <div class="challenge-head">
        <div class="label">VERIFICA</div>
        <div class="prompt">Seleziona le immagini del tuo amore</div>
      </div>

      <div class="grid" id="grid"></div>

      <div class="foot">
        <div id="counter">0 / 9</div>
        <button class="btn primary" id="verify">Verifica</button>
      </div>

      <div class="spinner-overlay" id="spinner">
        <div class="spinner"></div>
        <strong>Verifyingâ€¦</strong>
      </div>
    </div>
  </div>

  <script>
    const photos = [
      "8E50FFC1-3DA1-497F-A93C-427362B5DDAE.jpeg",
      "IMG_0706.jpeg",
      "IMG_1823.jpeg",
      "IMG_4361.jpeg",
      "IMG_4525.jpeg",
      "IMG_5351.jpeg",
      "IMG_5597.jpeg",
      "IMG_7918.jpeg",
      "IMG_8139.jpeg"
    ];

    const check = document.getElementById("check");
    const modal = document.getElementById("modal");
    const grid = document.getElementById("grid");
    const counter = document.getElementById("counter");
    const verify = document.getElementById("verify");
    const spinner = document.getElementById("spinner");
    const startCard = document.getElementById("startCard");
    const final = document.getElementById("final");

    const selected = new Set();

    function buildGrid(){
      grid.innerHTML="";
      selected.clear();
      photos.forEach((src,i)=>{
        const tile=document.createElement("div");
        tile.className="tile";
        const img=document.createElement("img");
        img.src=src;
        const badge=document.createElement("div");
        badge.className="badge";
        badge.textContent="âœ“";
        tile.onclick=()=>{
          if(selected.has(i)){
            selected.delete(i);
            tile.classList.remove("selected");
          }else{
            selected.add(i);
            tile.classList.add("selected");
          }
          counter.textContent=`${selected.size} / 9`;
          verify.classList.toggle("ready", selected.size===9);
        };
        tile.append(img,badge);
        grid.appendChild(tile);
      });
    }

    check.onclick=()=>{
      check.classList.add("checked");
      setTimeout(()=>{
        modal.classList.add("open");
        buildGrid();
      },600);
    };

    verify.onclick=()=>{
      if(selected.size!==9) return;
      spinner.classList.add("show");
      setTimeout(()=>{
        modal.classList.remove("open");
        document.body.classList.add("pink");
        startCard.style.display="none";
        final.classList.add("show");
      },1200);
    };
  </script>
</body>
</html>